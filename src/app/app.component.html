<main class="h-dvh p-4">
    <div class="p-1 flex flex-row gap-4">
        <input class="border-b-2 border-gray-300 p-1
				  hover:border-indigo-600 transition-all
				  focus:border-indigo-600 focus:outline-none focus:transition-none"
               [(ngModel)]="taskToAdd"/>
        <button class="opacity-40 hover:opacity-90
        text-4xl
                                   leading-none transition-all"
                (click)="add_item(taskToAdd)">
            &plus;
        </button>
    </div>
    <ul>
        @for (todoItem of list; track todoItem) {
            <li #item data-hovered="false"
                class="mb-2 mt-2 p-4 bg-gray-100 rounded-xl
                       flex flex-row gap-4 content-center
                       hover:bg-gray-200 select-none text-xl"
                [ngClass]="{ 'bg-indigo-200 hover:bg-indigo-200': todoItem.checked }"
                (click)="todoItem.change_state()"
                (mouseover)="item.dataset['hovered'] = 'true'"
                (mouseleave)="item.dataset['hovered'] = 'false'">
                <label [ngClass]="{ 'line-through': todoItem.checked }">
                    {{ todoItem.task }}
                </label>
                @if (item.dataset['hovered'] === 'true') {
                    <button class="opacity-40 hover:opacity-90
                                   leading-none transition-all"
                            (click)="remove_item(todoItem)">
                        &cross;
                    </button>
                }
            </li>
        }
    </ul>
    <button class="mt-4 hover:ring-indigo-600 hover:ring-2" (click)="remove_completed()">
        Remove all completed
    </button>
</main>
